<app-nav-bar></app-nav-bar>

<!-- 상단 네비게이션 바 -->
<div class="group-navigation">
  <ul>
    <li (click)="showMembersTab()">Group Members</li>
    <li (click)="showChannelsTab()">Group Channels</li>
  </ul>
</div>

<!-- 그룹 멤버 리스트 -->
<div *ngIf="showMembers" class="group-detail-container">
  <h2>Group Members</h2>

  <!-- 그룹 관리자 -->
  <h3>Group Admin</h3>
  <ul>
    <li *ngFor="let admin of groupAdmins">
      <strong>{{ admin.firstName }} {{ admin.lastName }}</strong> - {{ admin.email || admin.role }}
    </li>
  </ul>

    <!-- Super Admin만 볼 수 있는 Group Admin으로 추가할 유저 선택 -->
    <div *ngIf="isSuperAdmin">
      <div class="add-admin-container">
        <h3>Add Group Admin</h3>
        <select [(ngModel)]="newAdminEmail">
          <option *ngFor="let user of filteredAdmins" [value]="user.email">
            {{ user.firstName }} {{ user.lastName }} ({{ user.email }})
          </option>
        </select>
        <button (click)="addGroupAdmin()">➕ Add Group Admin</button>
      </div>
    </div>
    
  <!-- 일반 유저 리스트 -->
  <h3>Users</h3>
  <ul>
    <li *ngFor="let member of groupMembers">
      <strong>{{ member.firstName }} {{ member.lastName }}</strong> - {{ member.email }} 
      <span *ngIf="member.status === 'Pending'">(Pending)</span>
      <span *ngIf="member.status === 'Accepted'">(Accepted)</span>
    </li>
  </ul>

 <!-- 유저 초대 드롭다운 -->
 <div class="invite-user-container">
  <h3>Invite User</h3>
  <select [(ngModel)]="newUserEmail">
    <option *ngFor="let user of allUsers" [value]="user.email">{{ user.firstName }} {{ user.lastName }} ({{ user.email }})</option>
  </select>
  <button (click)="inviteUser()">➕ Invite</button>
</div>
</div>

<!-- 그룹 채널 리스트 -->
<div *ngIf="showChannels" class="group-detail-container">
  <h2>Group Channels</h2>
  <ul>
    <li *ngFor="let channel of groupChannels">
      <strong>{{ channel.name }}</strong>
      <p>{{ channel.description }}</p>
    </li>
  </ul>
  <div *ngIf="groupChannels.length === 0">
    <p>No channels available in this group.</p>
  </div>
</div>
<!-- 그룹 기본 정보 -->
<div class="group-detail-container">
  <h1>{{ group?.name }}</h1>
  <p><strong>Description:</strong> {{ group?.description }}</p>
  <p><strong>Created by:</strong> {{ group?.creatorName }}</p>
</div>
